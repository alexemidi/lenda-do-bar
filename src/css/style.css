/* =========================================
   1. VARIÁVEIS E RESET
   ========================================= */
:root {
    --bg-wood: #1a120b;
    --bg-felt: #2c3e50;
    --paper: #e6dcc3;
    --paper-dark: #cbb892;
    --gold: #ffb700;
    --blood: #8a0303;
    --ink: #2b2b2b;
    --shadow: rgba(0,0,0,0.6);
    --chaos: #9c27b0;
    --chaos-light: #e1bee7;
}

* { box-sizing: border-box; user-select: none; }

body {
    font-family: 'Roboto Slab', serif;
    background-color: var(--bg-wood);
    background-image: radial-gradient(circle, #2e2218 0%, #0d0905 100%);
    color: var(--paper);
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
    padding: 15px;
}

h1, h2, h3, button.western-btn, .western-font {
    font-family: 'Rye', serif;
    letter-spacing: 1px;
    text-transform: uppercase;
}

/* =========================================
   2. LAYOUT E UTILITÁRIOS
   ========================================= */
#app-container { width: 100%; max-width: 450px; position: relative; }

.screen { display: none; animation: fadeIn 0.4s ease-out; }
.screen.active { display: block; }

.text-center { text-align:center; }
.mt-2 { margin-top:10px; }
.scroll-content { max-height: 320px; overflow-y: auto; padding-right: 5px; }
.scroll-content::-webkit-scrollbar { width: 6px; }
.scroll-content::-webkit-scrollbar-thumb { background: #8d6e63; border-radius: 3px; }

/* =========================================
   3. COMPONENTES DE UI (Painéis, Botões, etc)
   ========================================= */
/* Painel de Papel Padrão */
.paper-panel {
    background: var(--paper);
    color: var(--ink);
    padding: 20px;
    border-radius: 4px;
    box-shadow: 0 0 0 2px #5c4a35, 0 0 0 8px #1a120b, 0 10px 20px var(--shadow);
    margin-bottom: 15px;
    position: relative;
}
.paper-panel::after, .paper-panel::before {
    content: ''; position: absolute; top: 10px; width: 8px; height: 8px; 
    background: #3e2723; border-radius: 50%; box-shadow: 0 1px 0 rgba(255,255,255,0.3);
}
.paper-panel::before { left: 10px; }
.paper-panel::after { right: 10px; }

/* Botões Estilo Western */
button { cursor: pointer; border: none; outline: none; transition: transform 0.1s, background-color 0.3s, color 0.3s; }
button:active { transform: scale(0.97); }
button:disabled { opacity: 0.8; cursor: not-allowed; filter: grayscale(0.2); }

.western-btn {
    width: 100%;
    padding: 12px;
    margin: 6px 0;
    background: linear-gradient(to bottom, #5d4037, #3e2723);
    color: #ffecd2;
    border: 2px solid #8d6e63;
    border-radius: 4px;
    font-size: 1.1rem;
    text-shadow: 1px 1px 0 #000;
    box-shadow: 0 4px 0 #281813;
}
.western-btn.primary { background: linear-gradient(to bottom, #d4af37, #aa8c2c); color: #2e2218; border-color: #fdd835; }
.western-btn.danger { background: linear-gradient(to bottom, #c62828, #8e0000); border-color: #e57373; }
.western-btn.secondary { background: linear-gradient(to bottom, #455a64, #263238); border-color: #78909c; }
.western-btn.small { padding: 5px 10px; font-size: 0.9rem; width: auto; }

/* Botão Atirar Cinza quando desabilitado */
.western-btn.danger:disabled {
    background: #555;
    border-color: #333;
    color: #aaa;
    filter: none;
    box-shadow: none;
}

.western-btn.btn-protect {
    background: #2196F3;
    border-color: #64B5F6;
    color: white;
    transition: all 0.3s ease;
}
.western-btn.btn-fire {
    background: linear-gradient(to bottom, #ff5722, #bf360c);
    border-color: #ff8a65;
    color: #fff;
    transition: all 0.3s ease;
}
.western-btn.btn-aim {
    background: linear-gradient(to bottom, #7b1fa2, #4a148c);
    border-color: #ce93d8;
    color: #fff;
    transition: all 0.3s ease;
    box-shadow: 0 4px 0 #38006b;
}

.btn-black {
    background: #111;
    color: #fff;
    border: 2px solid #444;
    box-shadow: 0 4px 0 #000;
    border-radius: 4px;
    padding: 5px 10px;
    font-size: 1.2rem;
    margin-left: 8px;
}
.btn-purple {
    background: #4a148c;
    color: #fff;
    border: 2px solid #7b1fa2;
    box-shadow: 0 4px 0 #230b42;
    border-radius: 4px;
    padding: 5px 10px;
    font-size: 1.2rem;
    margin-left: 8px;
}

.help-btn {
    position: absolute; top: 10px; right: 10px; width: 35px; height: 35px;
    border-radius: 50%; background: var(--paper); color: var(--ink);
    font-weight: bold; font-size: 1.2rem; border: 2px solid #3e2723;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.5); font-family: 'Rye', serif; z-index: 50;
}

.tiny-btn { width: 32px; height: 32px; font-weight: bold; border-radius: 4px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(0,0,0,0.3); color: white; }
.bg-blue { background: #455a64; }
.bg-red { background: #c62828; }

/* Setup Slots */
.slot-row { display: flex; gap: 8px; margin-bottom: 8px; align-items: center; background: rgba(0,0,0,0.1); padding: 5px; border-radius: 4px; border: 1px dashed #8d6e63; }
.slot-name { flex: 1; font-weight: bold; font-size: 1.1rem; }

/* Switches (Massacre e Caos) */
.switch-container {
    display: flex; align-items: center; justify-content: center;
    gap: 10px; margin: 12px auto; padding: 8px 15px;
    border-radius: 8px; border: 2px solid #5d4037;
    background: rgba(0, 0, 0, 0.35);
    box-shadow: 0 3px 8px rgba(0,0,0,0.7);
    width: fit-content;
}
.massacre-label {
    font-family: 'Rye', serif; font-size: 0.95rem; font-weight: 700;
    letter-spacing: 2px; text-transform: uppercase; color: #555; text-align: right;
}
.switch { position: relative; display: inline-block; width: 54px; height: 28px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
    position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(to bottom, #5d4037, #3e2723);
    transition: .4s; border: 2px solid #3e2723;
    box-shadow: 0 2px 4px rgba(0,0,0,0.7);
}
.slider.before {
    position: absolute; content: ""; height: 18px; width: 18px;
    left: 3px; bottom: 3px; background-color: #cbb892;
    box-shadow: 0 0 4px rgba(0,0,0,0.6); transition: .4s;
}
.slider:before {
    position: absolute; content: ""; height: 18px; width: 18px;
    left: 3px; bottom: 3px; background-color: #cbb892;
    box-shadow: 0 0 4px rgba(0,0,0,0.6); transition: .4s;
}
.slider.round { border-radius: 34px; }
.slider.round:before { border-radius: 50%; }

/* Estilos do Modo Massacre (Fogo) */
input:checked + .slider {
    background: radial-gradient(circle at 20% 50%, #ffe0b2, #ff9800, #bf360c);
    border-color: #ffb74d;
    box-shadow: 0 0 4px rgba(255, 111, 0, 0.9), 0 0 10px rgba(255, 87, 34, 0.8), 0 0 18px rgba(255, 160, 0, 0.6);
}
input:checked + .slider:before {
    transform: translateX(24px); background-color: #fff3e0;
    box-shadow: 0 0 6px rgba(255, 249, 196, 0.9);
}
input:disabled + .slider { opacity: 0.5; cursor: not-allowed; }

.switch-container:not(.chaos-style):has(input:checked) {
    border-color: #ffb700;
    background: linear-gradient(135deg, #100a08 30%, #3e1f18 100%);
    animation: flamePulse 1.4s infinite ease-in-out;
}
.switch-container:not(.chaos-style):has(input:checked) .massacre-label {
    color: #ffb700;
    text-shadow: 0 0 5px rgba(255, 183, 0, 0.8), 0 0 10px rgba(255, 69, 0, 0.6);
}

/* Estilos do Modo Caos (Roxo) */
.switch-container.chaos-style:has(input:checked) {
    border-color: var(--chaos);
    background: linear-gradient(135deg, #1a0f1f 30%, #2e1b33 100%);
    box-shadow: 0 0 10px rgba(156, 39, 176, 0.4);
}
.switch-container.chaos-style:has(input:checked) .massacre-label {
    color: var(--chaos-light);
    text-shadow: 0 0 5px var(--chaos);
}
.switch-container.chaos-style input:checked + .slider {
    background: radial-gradient(circle at 20% 50%, #e1bee7, #9c27b0, #4a148c);
    border-color: #ce93d8;
    box-shadow: 0 0 4px rgba(156, 39, 176, 0.9);
}

/* Jogo & Cartas */
.mesa-info { text-align: center; margin-bottom: 10px; }
.card-wrapper-padding { padding: 15px; overflow: visible; }
.card-display { 
    width: 100px; height: 140px; margin: 0 auto 15px; 
    background-color: transparent; background-size: cover; background-position: center; 
    border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); 
    filter: sepia(0.3) contrast(1.1); position: relative; 
}
.flip-container { perspective: 1000px; margin: 0 auto; width: 140px; height: 210px; }
.flipper { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; transition: transform 0.3s ease; }
.front, .back { 
    position: absolute; width: 140px; height: 210px; left: 50%; top: 0; 
    transform: translateX(-50%); backface-visibility: hidden; 
    border-radius: 8px; background-size: cover; 
}
.front { transform: translateX(-50%) rotateY(180deg); } 
.back { transform: translateX(-50%) rotateY(0deg); background-image: url('../assets/imgs/card-back.png'); }

.narrator-box { 
    font-style: italic; text-align: center; color: var(--gold); 
    min-height: 30px; margin-bottom: 5px; text-shadow: 1px 1px 2px #000;
    font-size: 1.15rem; 
}
.player-card { background: #2b2b2b; color: #eee; border-left: 4px solid #555; padding: 10px; margin-bottom: 8px; display:flex; align-items:center; justify-content:space-between; border-radius:0 4px 4px 0; transition: all 0.3s; }
.player-card.starter { border-left: 4px solid var(--gold); background: #332a1e; }
.player-card.chaos-highlight { border-left: 4px solid var(--chaos); background: #2a1b2e; box-shadow: 0 0 10px rgba(156, 39, 176, 0.5); }
.player-card.dead { opacity: 0.6; background: #1a0f0f; border-left: 4px solid #8a0303; text-decoration: line-through; color: #e57373; }
.emoji-big { font-size: 1.8rem; margin-right: 10px; width: 40px; text-align: center; }
.log-box { background: rgba(0,0,0,0.5); color:#ccc; font-size:0.85rem; height:80px; overflow-y:auto; padding:5px; margin-top:10px; border-radius:4px; border:1px solid #444; }

/* =========================================
   NOVO ESTILO DO GAME STATUS (DIVIDIDO)
   ========================================= */
#game-status {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    min-height: 5em; /* Altura para acomodar emoji grande */
    background: rgba(20, 10, 5, 0.4);
    border: 2px solid #3e2723;
    border-radius: 8px;
    padding: 5px;
    margin-bottom: 8px;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    flex: 1; 
}

.status-emoji-area {
    width: 70px; /* Largura fixa */
    font-size: 2.8rem; /* Emoji grande */
    text-align: center;
    border-right: 2px dashed rgba(255, 183, 0, 0.3); /* Linha divisória */
    margin-right: 10px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.8));
}

.status-text-area {
    flex: 1;
    text-align: center;
    font-size: 1.15rem;
    color: var(--gold);
    line-height: 1.3;
    font-weight: bold;
    text-shadow: 1px 1px 2px #000;
    padding-right: 5px;
}
/* ========================================= */


/* Estatísticas e Banco de Dados */
.chalkboard { background: #1a1a1a; border: 8px solid #5d4037; color: rgba(255,255,255,0.9); font-family: 'Courier Prime', monospace; padding: 15px; border-radius: 6px; }
.chalk-text { color: #eee; border-bottom: 1px dashed #555; padding: 5px 0; display: flex; justify-content: space-between; }
.ach-row { display:flex; align-items:center; gap:10px; padding:8px; border-bottom:1px solid #ccc; margin-bottom:5px; }
.ach-row.locked { opacity: 0.5; filter: grayscale(1); }
.db-row { display:flex; gap:8px; align-items:center; padding:6px 0; border-bottom:1px solid rgba(255,255,255,0.03); }
.db-name-btn { flex:1; text-align:left; padding:10px; border-radius:6px; background:linear-gradient(#455a64,#2f434a); color:#fff; border:1px solid rgba(0,0,0,0.2); }

/* Botão Expulsar ajustado */
.db-remove-btn { 
    width: auto; height: 42px; padding: 0 10px;
    border-radius:6px; background:linear-gradient(#c62828,#8e0000); 
    color:#fff; display:flex; align-items:center; justify-content:center;
    font-size: 0.8rem; font-weight: bold; letter-spacing: 1px;
}

/* Modais e Toasts */
.modal-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.85); z-index:100; display:none; align-items:center; justify-content:center; }
.modal-overlay.active { display:flex; }
.wanted-poster { background: var(--paper); color: var(--ink); width: 90%; max-width: 320px; padding:20px; text-align:center; border:4px solid #3e2723; box-shadow: 0 0 30px rgba(0,0,0,0.8); transform: rotate(-2deg); }

.achievement-toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.95); border: 2px solid var(--gold); color: #fff; padding: 15px 25px; border-radius: 50px; display:flex; align-items:center; gap:10px; z-index:2000; opacity:0; pointer-events:none; transition: opacity 0.5s, top 0.5s; width:90%; max-width:350px; box-shadow: 0 5px 15px #000; }
.achievement-toast.show { opacity: 1; top: 40px; }

.simple-toast {
    position: fixed; top: 25%; left: 50%; transform: translateX(-50%);
    background: rgba(0,0,0,0.9); border: 2px solid var(--blood); color: #fff;
    padding: 15px 25px; border-radius: 8px; font-family: 'Rye', serif;
    text-align: center; z-index: 3000; opacity: 0; pointer-events: none;
    transition: opacity 0.5s ease; box-shadow: 0 0 20px rgba(138, 3, 3, 0.6);
    white-space: nowrap;
}
.simple-toast.show { opacity: 1; }

/* =========================================
   4. ESTILOS ESPECÍFICOS DE TELAS
   ========================================= */

/* Tela de Loading */
.loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; }
.loading-deck-info { 
    font-family: 'Roboto Slab', serif; margin-top: 25px; text-align: center; 
    background: #1a120b; padding: 15px; border-radius: 6px; border: 4px solid #5d4037; 
    outline: 2px dashed var(--gold); outline-offset: -8px; color: #e6dcc3; 
    font-size: 1.1rem; line-height: 1.6; max-width: 90%; box-shadow: 0 10px 25px rgba(0,0,0,0.8);
}

/* Tela de Setup (Estilo Carvão) */
#screen-setup .paper-panel {
    background: #14100e; 
    color: var(--paper);
    border: 1px solid #3e2723;
    box-shadow: 0 0 20px rgba(0,0,0,0.9);
}
#screen-setup .paper-panel h2 { color: var(--gold); border-bottom-color: var(--gold) !important; }
#screen-setup .paper-panel p { color: #bbb; }

/* =========================================
   5. ANIMAÇÕES
   ========================================= */
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes flamePulse { 
    0% { box-shadow: 0 0 6px rgba(255,140,0,0.4); } 
    50% { box-shadow: 0 0 14px rgba(255,69,0,0.9); } 
    100% { box-shadow: 0 0 6px rgba(255,140,0,0.4); } 
}
@keyframes spinCard { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(540deg); } }
@keyframes shake { 
    10%, 90% { transform: translate3d(-1px, 0, 0); } 
    20%, 80% { transform: translate3d(2px, 0, 0); } 
    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 
    40%, 60% { transform: translate3d(4px, 0, 0); } 
}
.shake-screen { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
.flip-anim { animation: spinCard 6s ease-in-out forwards; }

.card-animation { 
    position: relative; width: 70px; height: 98px; margin: 20px auto; 
    opacity: 0; animation: fadeIn 0.5s ease-out 0.5s forwards;
}
.card-anim {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-image: url('../assets/imgs/card-back.png'); background-size: cover; background-position: center;
    border-radius: 6px; box-shadow: 0 4px 8px rgba(0,0,0,0.5); animation: shuffle 2.5s infinite ease-in-out;
    border: 1px solid #2e2218;
}
.card-anim:nth-child(1) { animation-delay: 0s; z-index: 3; }
.card-anim:nth-child(2) { animation-delay: 0.25s; z-index: 2; }
.card-anim:nth-child(3) { animation-delay: 0.5s; z-index: 1; }
@keyframes shuffle {
    0% { transform: translateX(0) rotate(0); }
    25% { transform: translateX(40px) rotate(15deg); }
    50% { transform: translateX(0) rotate(0); z-index: 1;} 
    75% { transform: translateX(-40px) rotate(-15deg); }
    100% { transform: translateX(0) rotate(0); }
}
.pulsate { animation: pulse 1.5s infinite; color: var(--gold); letter-spacing: 2px; text-shadow: 2px 2px 0 #000; }
@keyframes pulse { 0% { opacity: 0.8; transform: scale(1); } 50% { opacity: 1; transform: scale(1.05); } 100% { opacity: 0.8; transform: scale(1); } }