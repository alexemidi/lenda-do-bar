<!DOCTYPE html>
<html lang="pt-BR">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>O Mentiroso do Bar</title>
Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&family=Rye&display=swap" rel="stylesheet">
Â  Â  <link rel="stylesheet" href="src/css/style.css">
</head>
<body>

<div id="app-container">
Â  Â  <div id="systemToast" class="simple-toast"></div>

Â  Â  <div id="customModal" class="modal-overlay">
Â  Â  Â  Â  <div class="wanted-poster">
Â  Â  Â  Â  Â  Â  <h2 id="modalTitle" style="border-bottom: 2px solid #000; padding-bottom:5px;">AVISO</h2>
Â  Â  Â  Â  Â  Â  <p id="modalMessage" style="font-size: 1.1rem; margin: 15px 0;">Mensagem aqui</p>
Â  Â  Â  Â  Â  Â  <div id="modalActions" style="display: flex; gap: 10px; justify-content: center;"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="achievementToast" class="achievement-toast">
Â  Â  Â  Â  <span id="achEmoji" style="font-size: 2rem;">ğŸ†</span>
Â  Â  Â  Â  <div style="text-align: left;">
Â  Â  Â  Â  Â  Â  <div id="achPlayerName" style="color: var(--gold); font-weight: bold; font-size: 0.9rem;">JOGADOR</div>
Â  Â  Â  Â  Â  Â  <div style="font-size: 0.8rem; text-transform: uppercase;">Desbloqueou:</div>
Â  Â  Â  Â  Â  Â  <div id="achName" style="font-weight: bold;">Nome da Conquista</div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="screen-start" class="screen active">
Â  Â  Â  Â  <div class="paper-panel text-center">
Â  Â  Â  Â  Â  Â  <h1 style="font-size: 2.2rem; color: #3e2723; margin-bottom: 5px;">O MENTIROSO</h1>
Â  Â  Â  Â  Â  Â  <h2 style="font-size: 1.5rem; color: var(--blood);">DO BAR</h2>
Â  Â  Â  Â  Â  Â  <p style="font-style: italic; margin-top: 10px;">"A verdade liberta, mas a mentira embebeda."</p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div style="display:flex; flex-direction:column; gap:10px;">
Â  Â  Â  Â  Â  Â  <button class="western-btn primary" onclick="App.goTo('setup')">JOGAR</button>
Â  Â  Â  Â  Â  Â  <button class="western-btn secondary" onclick="App.goTo('stats')">ESTATÃSTICAS</button>
Â  Â  Â  Â  Â  Â  <button class="western-btn secondary" onclick="App.goTo('rules')">REGRAS</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div id="screen-rules" class="screen">
Â  Â  Â  Â  <div class="paper-panel">
Â  Â  Â  Â  Â  Â  <h2 class="text-center" style="border-bottom: 2px solid #000;">COMO JOGAR</h2>
Â  Â  Â  Â  Â  Â  <div class="scroll-content" style="font-size: 0.95rem; line-height: 1.5;">
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>1. A Ordem:</b> Calma que aqui Ã© uma bagunÃ§a organizada. Coloque os jogadores no sentido anti-horÃ¡rio, ou seja, o prÃ³ximo jogador Ã© da sua direta (a mÃ£o que vocÃª escreve, meu amor ğŸ˜˜):</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>2. O Baralho:</b> Cada jogador recebe 5 cartas. Usem um baralho fÃ­sico composto por:</p>
Â  Â  Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><b>AtÃ© 4 jogadores - 20 cartas:<br></b> 6&nbsp;Reis, 6&nbsp;Damas, 6&nbsp;Ases e 2&nbsp;Coringas<br>Ou troca um coringa por 1 especial (Opcional).</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><b>5 jogadores - 25 cartas:<br></b> 7&nbsp;Reis, 7&nbsp;Damas, 7&nbsp;Ases e 3&nbsp;Coringas. <br> atÃ© 2&nbsp;especiais* (Opcionais).</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><b>6 jogadores - 30 cartas:<br></b> 8&nbsp;Reis, 8&nbsp;Damas, 8&nbsp;Ases, 4&nbsp;Coringas e 2&nbsp;especiais<br> Ou 2&nbsp;Coringas + 4 especiais.</li>
Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>3. A Rodada:</b> O jogo sorteia a carta da mesa (ex: Rei). O jogador da vez deve jogar de 1 a 3 cartas viradas para baixo e anunciar: "Um Rei", "Dois Reis", etc.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>4. O Coringa:</b> Esse vale para qualquer carta da mesa.<br>Vai salvar sua vida.<br> <b>Obs: </b>Nos modos especiais, vocÃª substitui um coringa pela carta do modo especial escolhido.<br> Por exemplo, Valete ou carta 8.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>5. O Blefe:</b> O jogador antes de vocÃª pode blefar ou falar a verdade. Se vocÃª acreditar nele anuncie sua jogada colocando suas por cima. Mas se duvida grite "MENTIRA!" desafiando ele a revelar as cartas.<br> <b>OBS:</b> Apenas o jogador seguinte pode desafiar o anterior.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>6. O Desafio:</b> 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <br>- Se era <b>MENTIRA</b>: O mentiroso puxa o gatilho da prÃ³pria arma.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <br>- Se era <b>VERDADE</b>: O acusador puxa o gatilho da prÃ³pria arma.
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>7. O Disparo:</b> Ã‰ uma roleta russa. Ouviu o clique? Sorte sua. Ouviu o tiro? Fim de jogo. A cada puxada de gatilho, o baralho Ã© misturado novamente e a vez passa para o companheiro Ã  direita. Por isso, os jogadores ficam na ordem desde a seleÃ§Ã£o.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>8. Quem paga a conta:</b> Essa parte Ã© opcional cada jogador eliminado pode pagar uma prenda ou como estÃ£o em um bar...</p>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="text-align: center; margin: 15px 0; border-top: 1px dashed #555; border-bottom: 1px dashed #555; padding: 5px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="margin: 0; color: var(--blood);">ESPECIAIS</h3>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>9. Modo Massacre:</b> Nesse modo, o Valete (J) toca o terror. Se ele for jogado e alguÃ©m desafiar TODOS na mesa entram no duelo exceto quem jogou o Valete.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><b>10. Modo Caos:</b> Jogou um 8 e duvidaram? O Caos reina. Ã‰ um tiroteio generalizado onde cada um escolhe seu alvo. O mal vai tentar te influenciar, mas a decisÃ£o Ã© sua.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button class="western-btn primary" onclick="App.exitRules()">VOLTAR</button>
Â  Â  </div>

Â  Â  <div id="screen-setup" class="screen">
Â  Â  Â  Â  <div class="paper-panel">
Â  Â  Â  Â  Â  Â  <h2 class="text-center">JOGADORES</h2>
Â  Â  Â  Â  Â  Â  <p class="text-center" style="font-size: 0.9rem;">Os jogadores devem estar organizados no sentido anti-horÃ¡rio.</p>
Â  Â  Â  Â  Â  Â  <div id="slots-container" class="mt-2"></div>

Â  Â  Â  Â  Â  Â  <div style="display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:10px;">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="switch-container" style="margin:0;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="massacre-label">MASSACRE</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="switch">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="massacre-toggle" checked onchange="App.toggleMassacreConfig()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="slider round"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="switch-container chaos-style" style="margin:0;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="massacre-label">CAOS</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="switch">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="chaos-toggle" onchange="App.toggleChaosConfig()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="slider round"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button id="btn-start-match" class="western-btn primary" disabled onclick="App.confirmOrder()">INICIAR PARTIDA</button>
Â  Â  Â  Â  <button class="western-btn danger" onclick="App.goTo('start')">VOLTAR</button>
Â  Â  </div>

Â  Â  <div id="screen-loading" class="screen">
Â  Â  Â  Â  <div class="loading-container">
Â  Â  Â  Â  Â  Â  <h2 class="pulsate">EMBARALHANDO</h2>
Â  Â  Â  Â  Â  Â  <div class="card-animation">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-anim"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-anim"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-anim"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="deck-config-info" class="loading-deck-info"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="screen-database" class="screen">
Â  Â  Â  Â  <div class="paper-panel">
Â  Â  Â  Â  Â  Â  <h3>Adicionar Jogador</h3>
Â  Â  Â  Â  Â  Â  <div style="display:flex; gap:5px;">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="new-player-input" placeholder="Nome..." style="flex:1; padding:8px; font-family: inherit; color: #000;">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="western-btn secondary" style="width:auto; margin:0;" onclick="App.addNewPlayerDB()">+</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <hr style="border-color:#aaa; margin:15px 0;">
Â  Â  Â  Â  Â  Â  <h3>Salvos:</h3>
Â  Â  Â  Â  Â  Â  <div id="db-list" style="max-height:200px; overflow-y:auto;"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button class="western-btn danger" onclick="App.renderSetup(); App.goTo('setup')">CANCELAR</button>
Â  Â  </div>

Â  Â  <div id="screen-rotation" class="screen">
Â  Â  Â  Â  <div class="text-center">
Â  Â  Â  Â  Â  Â  <h2 id="rot-title" style="color: var(--gold); text-shadow: 2px 2px 0 #000;">A CARTA DA MESA Ã‰...</h2>
Â  Â  Â  Â  Â  Â  <div class="card-wrapper-padding">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flip-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flipper" id="card-flipper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="front" id="rot-card-front"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="back"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="rot-narrator" class="narrator-box" style="margin-top: 10px;"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="screen-game" class="screen">
Â  Â  Â  Â  <button class="help-btn" onclick="App.goTo('rules')">?</button>

Â  Â  Â  Â  <div class="mesa-info">
Â  Â  Â  Â  Â  Â  <div id="game-mesa-info" style="color: var(--paper); font-weight: bold; font-size: 1.2rem;">Mesa de ?</div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="card-display" id="game-mesa-card"></div>
Â  Â  Â  Â  <div id="starter-info" style="text-align:center; margin:5px 0; color:#ccc; font-size:1.15rem;"></div>

Â  Â  Â  Â  <div id="game-narrator-area" class="narrator-box"></div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 5px;">
Â  Â  Â  Â  Â  Â  <div id="game-status" style="min-height: 3.5em; display:flex; align-items:center; justify-content:center;"></div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div style="display:flex; flex-direction: column; gap: 6px; margin-left: 8px;">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="btn-chaos-toggle" class="btn-purple" onclick="App.toggleChaosMode()" style="margin:0;">ğŸŒ€</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="btn-duel-toggle" class="btn-black" onclick="App.toggleDuelMode()" style="margin:0;">âš”ï¸</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="game-players-list"></div>

Â  Â  Â  Â  <div id="game-log" class="log-box"></div>

Â  Â  Â  Â  <div style="display:flex; gap:5px; margin-top:10px;">
Â  Â  Â  Â  Â  Â  <button class="western-btn secondary" onclick="App.restartGame()">REINICIAR</button>
Â  Â  Â  Â  Â  Â  <button class="western-btn danger" onclick="App.goTo('setup')">SAIR</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="screen-win" class="screen">
Â  Â  Â  Â  <div class="paper-panel text-center" style="border-color: var(--gold);">
Â  Â  Â  Â  Â  Â  <h1 style="color: #d4af37;">VENCEDOR!</h1>
Â  Â  Â  Â  Â  Â  <p id="win-msg" style="font-size: 1.2rem; font-weight: bold;"></p>
Â  Â  Â  Â  Â  Â  <div id="win-achievements" style="margin-top: 15px; border-top: 1px dashed #000; padding-top: 10px;"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button class="western-btn primary" onclick="App.restartGame()">JOGAR NOVAMENTE</button>
Â  Â  Â  Â  <button class="western-btn secondary" onclick="App.goTo('setup')">MUDAR JOGADORES</button>
Â  Â  </div>

Â  Â  <div id="screen-stats" class="screen">
Â  Â  Â  Â  <h2 class="text-center" style="color: var(--paper);">LIVRO DE REGISTROS</h2>
Â  Â  Â  Â  <div class="chalkboard" id="stats-board" style="max-height:400px; overflow-y:auto;"></div>
Â  Â  Â  Â  <div class="mt-2">
Â  Â  Â  Â  Â  Â  <button class="western-btn danger" onclick="App.confirmResetStats()">APAGAR EVIDÃŠNCIAS</button>
Â  Â  Â  Â  Â  Â  <button class="western-btn primary" onclick="App.goTo('start')">VOLTAR</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="screen-achievements" class="screen">
Â  Â  Â  Â  <div class="paper-panel">
Â  Â  Â  Â  Â  Â  <h3 id="ach-screen-title" class="text-center">Conquistas de Fulano</h3>
Â  Â  Â  Â  Â  Â  <div id="ach-list-content" class="scroll-content"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button class="western-btn primary" onclick="App.goTo('stats')">VOLTAR Ã€S ESTATÃSTICAS</button>
Â  Â  </div>
</div>

<script type="module">
Â  Â  // Importa APENAS o App. O app.js jÃ¡ importa tudo o que precisa (state, logic, audio, etc.)
Â  Â  import { App } from './src/js/app.js';

Â  Â  // Joga o App para a janela global para o HTML ver
Â  Â  window.App = App;

Â  Â  // Inicia o jogo
Â  Â  window.onload = () => {
Â  Â  Â  Â  console.log("Iniciando aplicaÃ§Ã£o...");
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  App.init();
Â  Â  Â  Â  Â  Â  console.log("AplicaÃ§Ã£o iniciada com sucesso!");
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error("Erro fatal ao iniciar o App:", error);
Â  Â  Â  Â  Â  Â  alert("Erro ao carregar o jogo. Verifique o console (F12).");
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  };
</script>
</body>
</html>